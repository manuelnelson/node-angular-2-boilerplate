{"version":3,"sources":["../src/server/index.js"],"names":["app","server","createServer","use","static","exposedHeaders","corsHeaders","json","limit","bodyLimit","config","db","listen","process","env","PORT","port","console","log","address"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAIA,MAAM,wBAAV;AACAA,IAAIC,MAAJ,GAAa,eAAKC,YAAL,CAAkBF,GAAlB,CAAb;;AAEA;AACAA,IAAIG,GAAJ,CAAQ,kBAAQC,MAAR,CAAe,QAAf,CAAR;;AAEA;AACAJ,IAAIG,GAAJ,CAAQ,sBAAO,KAAP,CAAR;;AAEA;AACAH,IAAIG,GAAJ,CAAQ,oBAAK;AACZE,iBAAgB,iBAAOC;AADX,CAAL,CAAR;;AAIAN,IAAIG,GAAJ,CAAQ,qBAAWI,IAAX,CAAgB;AACvBC,QAAQ,iBAAOC;AADQ,CAAhB,CAAR;;AAIA;AACA,kBAAc,cAAM;;AAEnB;AACAT,KAAIG,GAAJ,CAAQ,0BAAW,EAAEO,wBAAF,EAAUC,MAAV,EAAX,CAAR;;AAEA;AACAX,KAAIG,GAAJ,CAAQ,MAAR,EAAgB,mBAAI,EAAEO,wBAAF,EAAUC,MAAV,EAAJ,CAAhB;;AAEAX,KAAIC,MAAJ,CAAWW,MAAX,CAAkBC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,iBAAOC,IAA7C;;AAEAC,SAAQC,GAAR,sBAA+BlB,IAAIC,MAAJ,CAAWkB,OAAX,GAAqBH,IAApD;AACA,CAXD;;kBAaehB,G","file":"index.js","sourcesContent":["import http from 'http';\r\nimport express from 'express';\r\nimport cors from 'cors';\r\nimport morgan from 'morgan';\r\nimport bodyParser from 'body-parser';\r\nimport initializeDb from './db';\r\nimport middleware from './middleware';\r\nimport api from './api';\r\nimport config from './config.json';\r\n\r\nlet app = express();\r\napp.server = http.createServer(app);\r\n\r\n//static files\r\napp.use(express.static('public'));\r\n\r\n// logger\r\napp.use(morgan('dev'));\r\n\r\n// 3rd party middleware\r\napp.use(cors({\r\n\texposedHeaders: config.corsHeaders\r\n}));\r\n\r\napp.use(bodyParser.json({\r\n\tlimit : config.bodyLimit\r\n}));\r\n\r\n// connect to db\r\ninitializeDb( db => {\r\n\r\n\t// internal middleware\r\n\tapp.use(middleware({ config, db }));\r\n\r\n\t// api router\r\n\tapp.use('/api', api({ config, db }));\r\n\r\n\tapp.server.listen(process.env.PORT || config.port);\r\n\r\n\tconsole.log(`Started on port ${app.server.address().port}`);\r\n});\r\n\r\nexport default app;\r\n"]}